import axios from"axios";import packageInfo from"../package.json";const USER_AGENT_DEFAULT=!0,packageVersion=packageInfo.version,defaultAcceptVersionHeader="v5.0",supportedVersions=["v2","v3","v4","v5","canary"],name="@tryghost/content-api",resolveAPIPrefix=e=>{let t;return t="v5"===e||void 0===e||e.match(/^v5\.\d+/)?"/content/":e.match(/^v\d+\.\d+/)?`/${/^(v\d+)\.\d+/.exec(e)[1]}/content/`:`/${e}/content/`},defaultMakeRequest=({url:e,method:t,params:n,headers:i})=>axios[t](e,{params:n,paramsSerializer:i=>Object.keys(i).reduce((e,t)=>{var n=encodeURIComponent([].concat(i[t]).join(","));return e.concat(t+"="+n)},[]).join("&"),headers:i});export default function GhostContentAPI({url:o,key:r,host:e,version:s,userAgent:a,ghostPath:d="ghost",makeRequest:c=defaultMakeRequest}){if(e&&(console.warn(name+": The 'host' parameter is deprecated, please use 'url' instead"),o=o||e),this instanceof GhostContentAPI)return GhostContentAPI({url:o,key:r,version:s,userAgent:a,ghostPath:d,makeRequest:c});if(void 0===s)throw new Error(name+" Config Missing: 'version' is required. E.g. "+supportedVersions.join(","));let h;if("boolean"==typeof s)!0===s&&(h=defaultAcceptVersionHeader),s=void 0;else{if(s&&!supportedVersions.includes(s)&&!s.match(/^v\d+\.\d+/))throw new Error(name+` Config Invalid: 'version' ${s} is not supported`);h="canary"===s?(console.warn(name+": The 'version' parameter has a deprecated format 'canary', please use 'v{major}.{minor}' format instead"),defaultAcceptVersionHeader):s.match(/^v\d+$/)?(console.warn(name+": The 'version' parameter has a deprecated format 'v{major}', please use 'v{major}.{minor}' format instead"),s+".0"):s}if(!o)throw new Error(name+" Config Missing: 'url' is required. E.g. 'https://site.com'");if(!/https?:\/\//.test(o))throw new Error(name+` Config Invalid: 'url' ${o} requires a protocol. E.g. 'https://site.com'`);if(o.endsWith("/"))throw new Error(name+` Config Invalid: 'url' ${o} must not have a trailing slash. E.g. 'https://site.com'`);if(d.endsWith("/")||d.startsWith("/"))throw new Error(name+` Config Invalid: 'ghostPath' ${d} must not have a leading or trailing slash. E.g. 'ghost'`);if(r&&!/[0-9a-f]{26}/.test(r))throw new Error(name+` Config Invalid: 'key' ${r} must have 26 hex characters`);void 0===a&&(a=USER_AGENT_DEFAULT);e=["posts","authors","tags","pages","settings","tiers","newsletters","offers"].reduce((e,i)=>{return Object.assign(e,{[i]:{read:function(e,t={},n){return e&&(e.id||e.slug)?(t=Object.assign({},e,t),l(i,t,e.id||"slug/"+e.slug,n)):Promise.reject(new Error(name+" read requires an id or slug."))},browse:function(e={},t){return l(i,e,null,t)}}})},{});return delete e.settings.read,delete e.tiers.read,delete e.newsletters.read,delete e.offers.browse,e;function l(t,e,n,i=null){if(!i&&!r)return Promise.reject(new Error(name+" Config Missing: 'key' is required."));delete e.id;i=i?{Authorization:"GhostMembers "+i}:{},a&&(i["User-Agent"]="boolean"==typeof a?"GhostContentSDK/"+packageVersion:a),h&&(i["Accept-Version"]=h),e=Object.assign({key:r},e),n=`${o}/${d}/api${resolveAPIPrefix(s)}${t}/`+(n?n+"/":"");return c({url:n,method:"get",params:e,headers:i}).then(e=>Array.isArray(e.data[t])?1!==e.data[t].length||e.data.meta?Object.assign(e.data[t],{meta:e.data.meta}):e.data[t][0]:e.data[t]).catch(e=>{if(e.response&&e.response.data&&e.response.data.errors){const n=e.response.data.errors[0],i=new Error(n.message);var t=Object.keys(n);throw i.name=n.type,t.forEach(e=>{i[e]=n[e]}),i.response=e.response,i.request=e.request,i.config=e.config,i}throw e})}}!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){var n;if(e&&t)return-1==(n=(n=this._events=this._events||{})[e]=n[e]||[]).indexOf(t)&&n.push(t),this},t.once=function(e,t){var n;if(e&&t)return this.on(e,t),((n=this._onceEvents=this._onceEvents||{})[e]=n[e]||{})[t]=!0,this},t.off=function(e,t){e=this._events&&this._events[e];if(e&&e.length)return-1!=(t=e.indexOf(t))&&e.splice(t,1),this},t.emitEvent=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){n=n.slice(0),t=t||[];for(var i=this._onceEvents&&this._onceEvents[e],o=0;o<n.length;o++){var r=n[o];i&&i[r]&&(this.off(e,r),delete i[r]),r.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(t,n){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(e){return n(t,e)}):"object"==typeof module&&module.exports?module.exports=n(t,require("ev-emitter")):t.imagesLoaded=n(t,t.EvEmitter)}("undefined"!=typeof window?window:this,function(t,e){function r(e,t){for(var n in t)e[n]=t[n];return e}function s(e,t,n){var i,o;return this instanceof s?(i="string"==typeof(i=e)?document.querySelectorAll(e):i)?(this.elements=(o=i,Array.isArray(o)?o:"object"==typeof o&&"number"==typeof o.length?c.call(o):[o]),this.options=r({},this.options),"function"==typeof t?n=t:r(this.options,t),n&&this.on("always",n),this.getImages(),a&&(this.jqDeferred=new a.Deferred),void setTimeout(this.check.bind(this))):void d.error("Bad element for imagesLoaded "+(i||e)):new s(e,t,n)}function n(e){this.img=e}function i(e,t){this.url=e,this.element=t,this.img=new Image}var a=t.jQuery,d=t.console,c=Array.prototype.slice,h=((s.prototype=Object.create(e.prototype)).options={},s.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},s.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&h[t]){for(var n=e.querySelectorAll("img"),i=0;i<n.length;i++){var o=n[i];this.addImage(o)}if("string"==typeof this.options.background)for(var r=e.querySelectorAll(this.options.background),i=0;i<r.length;i++){var s=r[i];this.addElementBackgroundImages(s)}}},{1:!0,9:!0,11:!0});return s.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var n=/url\((['"])?(.*?)\1\)/gi,i=n.exec(t.backgroundImage);null!==i;){var o=i&&i[2];o&&this.addBackground(o,e),i=n.exec(t.backgroundImage)}},s.prototype.addImage=function(e){e=new n(e);this.images.push(e)},s.prototype.addBackground=function(e,t){e=new i(e,t);this.images.push(e)},s.prototype.check=function(){function t(e,t,n){setTimeout(function(){i.progress(e,t,n)})}var i=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once("progress",t),e.check()}):void this.complete()},s.prototype.progress=function(e,t,n){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&d&&d.log("progress: "+n,e,t)},s.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred&&(e=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[e](this))},(n.prototype=Object.create(e.prototype)).check=function(){return this.getIsImageComplete()?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},n.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},n.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},n.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},n.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},n.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},n.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(i.prototype=Object.create(n.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},i.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},i.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},(s.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((a=e).fn.imagesLoaded=function(e,t){return new s(this,e,t).jqDeferred.promise(a(this))})})(),s}),function(r){"use strict";r.fn.fitVids=function(e){var t,n,o={customSelector:null,ignore:null};return document.getElementById("fit-vids-style")||(t=document.head||document.getElementsByTagName("head")[0],(n=document.createElement("div")).innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-container{flex-grow: 1;width:100%;}.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>',t.appendChild(n.childNodes[1])),e&&r.extend(o,e),this.each(function(){var e=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"],i=(o.customSelector&&e.push(o.customSelector),".fitvidsignore"),e=(o.ignore&&(i=i+", "+o.ignore),r(this).find(e.join(",")));(e=(e=e.not("object object")).not(i)).each(function(){var e,t,n=r(this);0<n.parents(i).length||"embed"===this.tagName.toLowerCase()&&n.parent("object").length||n.parent(".fluid-width-video-wrapper").length||(n.css("height")||n.css("width")||!isNaN(n.attr("height"))&&!isNaN(n.attr("width"))||(n.attr("height",9),n.attr("width",16)),e=("object"===this.tagName.toLowerCase()||n.attr("height")&&!isNaN(parseInt(n.attr("height"),10))?parseInt(n.attr("height"),10):n.height())/(isNaN(parseInt(n.attr("width"),10))?n.width():parseInt(n.attr("width"),10)),n.attr("name")||(t="fitvid"+r.fn.fitVids._count,n.attr("name",t),r.fn.fitVids._count++),n.wrap('<div class="fluid-width-video-container"><div class="fluid-width-video-wrapper"></div></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*e+"%"),n.removeAttr("height").removeAttr("width"))})})},r.fn.fitVids._count=0}(window.jQuery||window.Zepto),function(){const i=window.matchMedia("(max-width: 767px)");var e=document.querySelector(".gh-head");const o=e.querySelector(".gh-head-menu"),r=o.querySelector(".nav");if(r){document.querySelector(".gh-head-logo");const t=r.innerHTML,n=(i.matches&&r.querySelectorAll("li").forEach(function(e,t){e.style.transitionDelay=.03*(t+1)+"s"}),function(){if(!i.matches){for(var e=[];r.offsetWidth+64>o.offsetWidth;){if(!r.lastElementChild)return;e.unshift(r.lastElementChild),r.lastElementChild.remove()}if(e.length){const t=document.createElement("button"),n=(t.setAttribute("class","nav-more-toggle"),t.setAttribute("aria-label","More"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor"><path d="M21.333 16c0-1.473 1.194-2.667 2.667-2.667v0c1.473 0 2.667 1.194 2.667 2.667v0c0 1.473-1.194 2.667-2.667 2.667v0c-1.473 0-2.667-1.194-2.667-2.667v0zM13.333 16c0-1.473 1.194-2.667 2.667-2.667v0c1.473 0 2.667 1.194 2.667 2.667v0c0 1.473-1.194 2.667-2.667 2.667v0c-1.473 0-2.667-1.194-2.667-2.667v0zM5.333 16c0-1.473 1.194-2.667 2.667-2.667v0c1.473 0 2.667 1.194 2.667 2.667v0c0 1.473-1.194 2.667-2.667 2.667v0c-1.473 0-2.667-1.194-2.667-2.667v0z"></path></svg>',document.createElement("div"));n.setAttribute("class","gh-dropdown"),10<=e.length?(document.body.classList.add("is-dropdown-mega"),n.style.gridTemplateRows="repeat("+Math.ceil(e.length/2)+", 1fr)"):document.body.classList.remove("is-dropdown-mega"),e.forEach(function(e){n.appendChild(e)}),t.appendChild(n),r.appendChild(t),document.body.classList.add("is-dropdown-loaded"),t.addEventListener("click",function(){document.body.classList.toggle("is-dropdown-open")}),window.addEventListener("click",function(e){!t.contains(e.target)&&document.body.classList.contains("is-dropdown-open")&&document.body.classList.remove("is-dropdown-open")})}else document.body.classList.add("is-dropdown-loaded")}});imagesLoaded(e,function(){n()}),window.addEventListener("resize",function(){setTimeout(function(){r.innerHTML=t,n()},1)})}}(),function(t,n){var i,o,r,s,a,d,c,h;function l(){var e;404===this.status?(t.removeEventListener("scroll",m),t.removeEventListener("resize",p)):(e=this.response.querySelectorAll("article.post-card"),console.log(e),e.forEach(function(e){o.appendChild(n.importNode(e,!0))}),(e=this.response.querySelector("link[rel=next]"))?(i.href=e.href,console.log(i.href)):(t.removeEventListener("scroll",m),t.removeEventListener("resize",p)),h=n.documentElement.scrollHeight,a=s=!1)}function e(){var e;a||(d+c<=h-r?s=!1:(a=!0,(e=new t.XMLHttpRequest).responseType="document",e.addEventListener("load",l),console.log(i.href),e.open("GET",i.href),e.send(null)))}function u(){s||t.requestAnimationFrame(e),s=!0}function m(){d=t.scrollY,u()}function p(){c=t.innerHeight,h=n.documentElement.scrollHeight,u()}n.documentElement.classList.contains("no-infinite-scroll")||(i=n.querySelector("link[rel=next]"))&&($(".testing-laura").click(function(e){e.preventDefault(),console.log(e.target.href),i=e.target}),o=n.querySelector(".infinite-scroll"))&&(a=s=!(r=300),d=t.scrollY,c=t.innerHeight,h=n.documentElement.scrollHeight,t.addEventListener("scroll",m,{passive:!0}),t.addEventListener("resize",p),u())}(window,document);
//# sourceMappingURL=casper.js.map